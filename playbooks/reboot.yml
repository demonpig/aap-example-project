---

- name: Rebooting Host with a Handler
  hosts: all
  become: true
  become_user: root
  
  handlers:
    - name: reboot host
      ansible.builtin.reboot:
        reboot_timeout: 15
  
  tasks:
    - name: Task to trigger a handler
      ansible.builtin.command: echo "Need to reboot host now!!!! Get to the choppa!"
      notify: reboot host
      
    - name: Sleep Task
      ansible.builtin.command: sleep 65s
      when: not skip_sleep|bool
